# QTC_YGO

实际上路演的时候只需要做出两个卡组

所以为了减少难度：

只做链接和融合召唤

不做同调超量灵摆召唤

## 游戏场地以及准备

卡组（40～60张）：同名卡最多放置3张。

EX卡组（0～15张）：有别于卡组，放置满足特定条件才能呼出的怪兽。

基本分信息

1. 主怪兽区域
放置召唤·特殊召唤的怪兽的区域。5个区域每个放置1只怪兽。在主怪兽区域最多放置5个怪兽。

2. 魔法&陷阱区域
使用魔法·陷阱卡时放置的区域，最多放置5张。P怪兽可以在左右两端区域当作魔法卡发动，这个场合当作P区域。

3. 卡组区域
卡组里侧表示放置在这个区域，玩家从这里把卡加入手卡。除非使用了一些卡的效果，基本上不能确认卡组中的卡。

4. EX卡组区域

融合·S·X·连接怪兽里侧表示放置的场所。另外，决斗途中也可能把P怪兽表侧加入，以及特殊召唤。

决斗中从场上送去墓地的P怪兽不送去墓地，而是在EX卡组表侧表示放置。

5. 墓地
被战斗破坏的怪兽或使用完的魔法·陷阱卡表侧表示放置的场所。双方玩家可以互相确认，墓地放置的卡的顺序不能变更。

6. 场地区域
放置自己发动的场地魔法卡的场所。场地魔法卡不放置在魔法&陷阱区域，也就不计入魔法&陷阱区域的5张之内。

7. EX怪兽区域
从EX卡组用特殊方法出场的怪兽放置的区域。左右各1个区域，决斗中基本上1个玩家只能使用其中1个区域。这个区域不计入主怪兽区域的5张之内。

其他：除外的卡放置在场地外
因卡的效果而被除外的卡，不会混在决斗场地内，放置在场地外。

ui还需要做：

卡片效果检视栏：点击某张卡，会在旁边检视到他的具体信息

操作信息检视栏：所有「信息」（流程/操作信息）会在这里面记录

bychz：

这部分制作任务主要在外部ui上。

内部实现的时候开一个场地的总类就好了。其他类继承时，必须实现：该位置一共可以放多少卡的限制，该位置上放了哪些卡片，卡片顶部是什么，能否检索以及检索该位置上卡片的方法。以及场地本身有没有是额外区域的性质。

## 游戏流程

1. 决斗开始时，双方各抽5张卡，基本分8000。手卡上限6张。
2. 回合制，双方轮流进行行动

回合主要分为：

1. 抽卡阶段

在这个阶段，你从卡组顶抽一张卡加入手牌，这里有一个时点，处理卡片描述的必发/诱发效果，之后宣言阶段结束。

2. 准备阶段

3. 主要阶段1

主要阶段就是你操作的部分，你的绝大部分动作均在主要1或主要2进行。

主要阶段，允许发动效果，进行一次通常召唤（包括盖怪兽），进行一次灵摆召唤，进行任意多次其余类型特殊召唤，变更已在场上存在怪兽的攻守表示（但。注意，主要1和主要2共享一个通召点，除非因为效果追加，再无后续动作，则宣言阶段结束。

4. 战斗阶段

主要用于怪兽战斗的阶段，进行攻击宣言，攻击对象选取，允许2速及以上效果发动，战斗结算，伤害结算，再无后续动作，则宣言阶段结束。

5. 主要阶段2 

主要阶段1基本一致，再无后续动作，则宣言回合结束，但有些怪兽效果只能在主2发动，那么以实际卡面效果为准。 

6. 结束阶段

bychz：

首先各个阶段每个都各自实现吧，在ui中设计一个点击进入下一阶段的按钮就好了

抽卡阶段/结束阶段/准备阶段开始都应该加入一个时间点。

抽卡结束不能连锁！

然后主要阶段中可以进行各类操作，解锁各类按钮。主要阶段在开始/结束时均加入一个时间点

战斗阶段封闭部分按钮，只允许发动战斗。战斗阶段开始时加入一个时间点，结束时加入一个时间点

主要阶段可以进行操作：选中手卡，选中额外怪兽区，选中场上怪兽，选中盖放卡牌，选中墓地卡牌。

战斗阶段可以进行操作：选中场上怪兽。

选中一张卡产生的选项：

主要阶段选中场上怪兽卡牌，可以发动其效果

选中怪兽牌，可以发动效果/通常召唤/链接召唤

选中盖放卡片，可以反面，或者发动

选中墓地，可以检索墓地中能够发动效果的卡牌

选中额外怪兽区，可以链接召唤（融合召唤需要魔法卡）

## 操作信息

上述任何操作，都会返回一个操作信息对象

操作信息对象本身没有任何含义，可以是一个字符串

操作信息在ui中需要被打在信息栏上

## 流程信息

上述任何回合变化都会返回这样一个流程信息

## 效果速度

分一速二速三速三类

一速：所有不能连锁的效果

二速：所有可以连锁但不是反击陷阱卡的效果

三速：所有反击陷阱卡

x速只能连锁小于等于x的速的卡牌，或者说二速不能连锁三速

## 时间点

时间点是所有操作/回合开始等等带来的！

任何效果/攻击的发动都要触发一个时间点

游戏中时间点只有一个作用，带来或者不带来一个连锁。

但是编写程序的时候，时间点必须用来记录所有游戏信息，包括且不限于：

流程信息

操作信息

~~以方便回溯找到问题（~~

~~目前我没有更好的办法，先这样~~

## 连锁

连锁是所有时间点结束时带来的

连锁开始，检视双方所有可发动效果，如果有则询问玩家

连锁需要带当前速度，如果三速则限制二速效果为不能发动

连锁对象发动后，初始化生成一个时间点对象

bychz：

对于时间点和连锁都作为一个单独的类建出来

这部分只需要实现好场上所有可以发动效果的检视就好了

效果检视部分，我们确定好卡组后细说qwq

上述两个部分详解：

时间点发动，被记录/ui中显示（初始化生成->）连锁发动（检索，询问）（初始化生成->） 时间点发动，记录/ui显示，结束

